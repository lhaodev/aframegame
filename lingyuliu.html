<html>
  <head>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://mixedreality.mozilla.org/ammo.js/builds/ammo.wasm.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-template-component@^3.1.1/dist/aframe-template-component.min.js"></script>
    <script src="follow.js"></script>
    <script src="keycontroller.js"></script>

    <script id="boxTemplate" type="text/x-nunjucks-template">
      {% for x in range(0, 11) %}
          <a-sphere width="1"
                  ammo-body="type:dynamic" ammo-shape="type:box"
                  material="src:wood.jpg;  repeat:1 1"
                  position="0 {{3*x}} -10">
          </a-sphere>
      {% endfor %}
    </script>

    <script>
      THREE.inverse = THREE.invert;
    </script>
  </head>
  <body>
    <a-scene physics="driver: ammo; debug: false; debugDrawMode: 1;">
      <a-entity
        id="jabba1"
        gltf-model="jabba.gltf"
        animation-mixer="clip:nod"
        position="-6 1 -10"
      ></a-entity>

      <a-entity
        id="weirdstone"
        gltf-model="lingyutransform.gltf"
        animation-mixer="clip:transform"
        position="-8 1 -10"
      ></a-entity>


      <a-entity
        id="ghost"
        gltf-model="lliufly.gltf"
        animation-mixer="clip:ghostfly"
        position="-20 1 -10"
        follow="target:#avatar;speed:1;dist:100;url:practice.html"
      ></a-entity>

      <a-entity
        id="jabba2"
        gltf-model="jabba.gltf"
        animation-mixer="clip:grow"
        position="20 1 -10"
        follow="target:#avatar;speed:1;dist:100;url:practice.html"
      ></a-entity>

      <a-box
        id="floor"
        ammo-body="type:static;"
        ammo-shape="type:box"
        width="200"
        height="200"
        depth="1"
        rotation="-90 0 0"
        position="0 -0.5 0"
        material="src:seamless_brick-512x512.png; repeat:40 40"
      ></a-box>

      <a-cone
        id="cone"
        radius-bottom="2"
        radius-top=".1"
        height="5"
        color="yellow"
        position="-10 1 -10"
      ></a-cone>

      <a-cone
        material="color:blue"
        position="5 1 -10"
        ammo-body="type: dynamic;"
        ammo-shape="type: cone"
        radius="2"
        height="2"
      ></a-cone>

      <a-cone material="color:blue" position="0 1 -10"></a-cone>

      <a-cone
        material="color:green"
        position="3 1 -10"
        follow="target:#avatar;url:practice.html; speed:2; dist:10"
        radius="2"
        height="2"
      ></a-cone>

      <!-- avatar -->
      <a-entity
        id="avatar"
        movement-controls="fly:false"
        look-controls="pointerLockEnabled:false"
        oculus-go-controls
        wasd-controls
      >
        <a-box
          ammo-body="type:kinematic;"
          ammo-shape="type:box"
          material="color:blue; opacity:0.5"
          position="0 0 0"
          width="3"
          height="1"
          depth="10"
        ></a-box>
        <a-entity camera position="0 1.6 0"></a-entity>
        <a-entity
          id="hud"
          health="10"
          score="0"
          text="width:3; value: Start Game!;"
          position="0 1 -2"
        ></a-entity>
      </a-entity>

      <a-entity template="src: #boxTemplate"></a-entity>

      <a-sky material="src:evening.jpeg"></a-sky>
    </a-scene>
  </body>
</html>
